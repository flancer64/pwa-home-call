# Правила создания головного скрипта (`./bin/server.js`)

## Назначение

Определяет принципы генерации **composition root** проекта ДомоЗвон — минимального стартового скрипта, подготавливающего окружение и контейнер зависимостей для запуска головного модуля `HomeCall_Back_App`.

## Цель

Создать исполняемый модуль `./bin/server.js`, который:

1. Загружает конфигурацию из `.env`.
2. Инициализирует контейнер `@teqfw/di`.
3. Регистрирует namespace проекта.
4. Получает экземпляр `HomeCall_Back_App` из контейнера и запускает его.

## Правила генерации

- Скрипт — ESM с шебангом `#!/usr/bin/env node`.
- Зависимости минимальны: `dotenv`, `node:path`, `node:url`, `node:fs`, `@teqfw/di`.
- Конфигурация загружается через `dotenv.config()`.
- Контейнер создаётся вызовом `new Container()`.
- Namespace-корни:
  - `App_` → `src` (корень проекта);
  - `Fl32_Web_` → `node_modules/@flancer32/teq-web/src`;
  - другие — по необходимости из `.env` или настроек проекта.
- Контейнер не содержит бизнес-логики; он лишь конфигурирует среду и зависимости.
- После настройки агент должен выполнить:

```js
const app = await container.get("HomeCall_Back_App$");
await app.run();
```

- Любая логика выше уровня DI и конфигурации запрещена.

## Контекст

`./bin/server.js` служит **единой точкой входа** для серверной части ДомоЗвон.
Он формирует окружение, создаёт контейнер и передаёт управление модулю приложения, который реализует всё поведение.

## Итог

Агент создаёт минимальный стартовый скрипт, обеспечивающий корректную инициализацию контейнера и запуск `HomeCall_Back_App`.
Композиция логики и бизнес-функций происходит исключительно внутри App-модуля.
