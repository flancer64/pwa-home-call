# Экран «Звонок»

**Path:** `./ctx/rules/web/ui/screen/call.md`

## Purpose

Фиксирует уникальную сцену, где пользователь полностью сосредоточен на звонке, все элементы управления поверх видео строго контролируются, а layout полностью нестандартный (без трёх зон).

> **Согласованность с продуктом:** `ctx/product/capabilities/connection.md` описывает состояние `active` одного окна, поэтому `call` — это текущая реализация этого состояния. Документ подчёркивает, что интерфейс остаётся в пределах этого слоя, а future state machine из `ctx/agent/plan/2025/11/20251129-rules-implementation-fixes.md` пересоберёт layout таким образом, чтобы `call` больше не воспринимался как отдельный экран.

## Layout

- **Remote video** — основной слой занимает всю площадь экрана (`remoteStream`). Нет отдельных областей `header/main/footer`.
- **Local mini** — в правом верхнем углу плавает draggable-тележка с `localStream`, которую можно перемещать касанием; она визуально отделена от удалённого видео и не содержит текстовых подсказок.
- **Bottom FABs** — две круглые кнопки выровнены по центру нижней части экрана:
  * красная FAB с крестом завершает звонок.
  * зелёная FAB с шестерёнкой открывает overlay `settings`.

## Requirements

- Все статусы, ошибки и события выводятся исключительно через `notifications.md` (toast); экран не использует зоны `header/main/footer`.
- Миниатюра `localStream` и FAB-кнопки не перекрывают основной видеопоток; они визуально плавают поверх видео без статических текстов.
- FAB-кнопки передают действия в DI-контроллер (`onEndRequest`, `onSettingsRequest`); сам экран не описывает переходы или сетевые операции.
- Переход к `end` или показ `settings` идёт по событиям, описанным в `screens.md`; вызов `call` держит собственную layout-схему и не противоречит общей трёхзонной модели.
