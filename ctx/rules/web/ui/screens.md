# Screens Map

**Path:** `./ctx/rules/web/ui/screens.md`

## Purpose

Сводит в одном месте состояния `home → invite → call → end`, фиксирует CTA и триггеры переходов, а также отмечает ограничения на дополнительные действия. Документы в `screens/` описывают только содержание зон, переходы содержатся здесь.

## States

1. **home** — бренд, FAB настроек, одна кнопка «Связать». CTA создаёт `sessionId` и показывает ссылку (`share-link`).
2. **invite** — заголовок, ссылка и две крупные кнопки: основной (Share/Copy) и CTA **«Начать звонок»**.
3. **call** — удалённый видеопоток, миниатюра локального видео, единственная кнопка **«Закрыть»** и FAB настроек.
4. **end** — текст «Звонок завершён», CTA **«Вернуться на главную»**, короткий статус.

Все экраны опираются на трёхзонную структуру `layout.md` и стиль `style.md`.

## Transitions

- `home → invite`: `onStartCall` генерирует `sessionId`, строит ссылку и вызывает `showInvite`. Статус ссылки подтверждается через `toast.success`.
- `home → call`: если читается `?session=<uuid>`, `Flow` пропускает `invite`, подготавливает медиа и показывает `call`.
- `invite → call`: при `onStartCall` запускается подготовка медиа, `Net.startSignal`, `Rtc.startOutgoingSession` и отрисовка `call`.
- `call → end`: завершение через кнопку «Закрыть» или сбой сети останавливает медиа/сигналинг и отображает `end` с `connectionMessage`.
- `end → home`: кнопка очищает `sessionId`, сбрасывает состояние и показывает `home`.
- `settings` открывается как карточка поверх `home`/`call`; закрытие возвращает в тот же экран.

## Status routing

Статусы медиа, разрешений и сигналинга показываются только через `toast` (`notifications.md`). `call` и `invite` остаются без текстовых поверхностей.

## References

- `./layout.md` — общее расположение зон.
- `./style.md` — визуальные ограничения.
- `./share-link.md` — техника генерации и шаринга ссылки.
- `./screens/` — документы с уникальным содержанием каждого экрана.
