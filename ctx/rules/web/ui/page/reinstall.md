# Reinstall Page

**Path:** `./ctx/rules/web/ui/page/reinstall.md`

## Purpose

Документирует `/reinstall.html` как служебную страницу, которая не участвует в экранных сценариях, не использует трёхзонную модель и не отображает компоненты `screen-card`, `screen-header` или `screen-note`. Она запускает инфраструктурный цикл переустановки PWA-контуров, очищая кеши и заново устанавливая сервис-воркер, прежде чем вернуть пользователя на `/`.

## Process

1. Загружается минимальная карточка статуса и сообщение о текущем шаге, без CTA — управление выполняется скриптом.
2. Скрипт поочерёдно очищает кеши (`CacheStorage`), снимает регистрацию сервис-воркеров и запрашивает повторную регистрацию через `service-worker.js`.
3. После установки нового воркера отправляется команда `clear-caches-and-rebuild`, и страница выполняет `location.replace('/')` независимо от статуса интерфейса.

## Role in PWA contour

- Страница интегрирована с `VersionWatcher` и `CacheCleaner`: она используется при несогласованности версий — после обнаружения `version.json` с иным номером пользователь перемещается сюда, скрипт приводит кеши и воркер в согласованное состояние, и затем происходит редирект на `index.html`/`home`.
- Порядок действий фиксируется: очистка кешей, отмена регистрации, повторная регистрация и запуск `clear-caches-and-rebuild`.
