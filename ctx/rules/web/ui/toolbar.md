# Toolbar

## Назначение

Определяет состав и поведение верхней панели управления (toolbar) приложения ДомоЗвон.

---

## 1. Общая структура

- Левая часть — индикаторы состояния соединения (`ws`, `rtc`).
- Центральная часть — информационный блок (имя пользователя, название комнаты, иконка статуса).
- Правая часть — выпадающее меню (гамбургер), содержащее настройки, выход и справку.
- На мобильных устройствах — элементы схлопываются в меню; на десктопах выводятся как отдельные кнопки.

---

## 2. Индикаторы состояния

| Индикатор | Значение                       | Цвета                                                        |
| --------- | ------------------------------ | ------------------------------------------------------------ |
| **WS**    | состояние WebSocket-соединения | зелёный — подключено; серый — отключено; красный — ошибка    |
| **RTC**   | состояние P2P-сессии           | зелёный — активна; серый — нет соединения; жёлтый — ожидание |

---

## 3. Информационный блок

- Отображает текущую комнату и пользователя.
- Может включать время звонка или статус «ожидание соединения».
- В десктопном режиме — центрируется; в мобильном — скрывается при активном видео.

---

## 4. Меню (гамбургер)

- Элементы: настройки, очистка кэша, сведения, выход.
- В десктопной версии — часть пунктов (очистка, настройки) выведены отдельными иконками.
- Меню вызывается по нажатию на иконку `menu.svg`.
- Новая опция `Поделиться ссылкой`, которая инициирует `ui:action:share-link` и открывает экран `invite` при необходимости.

### Действие «Поделиться ссылкой»

- `ui:action:share-link` обрабатывается `HomeCall_Web_Core_App`, собирающим текущие `room`/`name` и формирующим ссылку для отправки.
- `HomeCall_Web_Core_App` сначала пытается вызвать `navigator.share()` с `title`, `text` и ссылкой; если `navigator.share` недоступен или отклонён, ссылка копируется через `navigator.clipboard.writeText`, а `HomeCall_Web_Ui_Toast` уведомляет пользователя о копировании.
- `HomeCall_Web_Ui_Toast` также отображает ошибки Web Share API (например, отказ доступа) и повторно предлагает пользователю скопировать ссылку вручную.
- Поскольку действие инициирует `invite`, экран обеспечивает синхронизацию URL-параметров с `HomeCall_Web_Infra_Storage` и позволяет подтвердить данные перед отправкой.

---

## 5. Адаптивность

- При ширине <768 px панель схлопывается: индикаторы и информация скрываются, доступ через меню.
- При ширине ≥768 px панель разворачивается, все элементы отображаются.

---

## 6. Связи

- `./layout.md` — общая структура экранов.
- `../style.md` — визуальные параметры.
- `../arch/front.md` — архитектурная реализация.
