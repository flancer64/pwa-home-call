# Call Screen

**Путь:** ./ctx/rules/web/ui/screens/call.md

## Назначение

Экран `call` отображает активную видеосессию: поток собеседника занимает основной фон, локальный стрим показывается в виде миниатюры, а единственное действие — завершение вызова. Все статусы передаются через `toast`, никаких дополнительных панелей на экране нет.

## Основные этапы

1. При переходе `home → call` `HomeCall_Web_Core_App` передаёт `remoteStream`, callback `onEnd` и ссылки на `toast` для уведомлений.
2. `HomeCall_Web_Media_Manager` связывает DOM-элементы (`#remote-video`, `#local-miniature`, `#no-media`) и реагирует на события устройств; `#no-media` показывает только нейтральную иконку, без текста.
3. Статусы соединения (`connecting`, `retry`, `connected`) отображаются как `toast` без дублирования в интерфейсе; сообщения `info`/`warn`/`error` синхронизированы с `notifications.md`.
4. Кнопка «Завершить» — единственное интерактивное действие; она вызывает `HomeCall_Web_Core_App.endCall`, останавливает потоки и переводит пользователя в `end`.

## Доступность и адаптивность

- Основной медиа-блок занимает всю доступную область, локальная миниатюра остаётся небольшим overlay.
- Кнопка «Завершить» расположена внизу и растягивается по ширине на мобильных устройствах; на планшетах она центрируется с достаточными отступами.
- Камера и микрофон проверяются автоматически: ошибки отражаются через `toast` («Камера недоступна» / «Микрофон отключён») без дополнительных панелей.

## Связи

- `screens.md` — описанный контур `home → call → end`.
- `notifications.md` — короткие сообщения о состоянии соединения, медиа-состоянии и ошибках.
