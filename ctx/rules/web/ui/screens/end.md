# End Screen

**Путь:** ./ctx/rules/web/ui/screens/end.md

## Назначение

Экран `end` кратко сообщает о завершении вызова (успешно или из-за ошибки) и предлагает одним нажатием вернуться на главный экран. Он не содержит дополнительных действий и остаётся в рамках минималистичного UX.

## Поведение

1. `HomeCall_Web_Core_App.endCall` очищает `state.lastCallTarget`, останавливает локальные потоки, завершает Peer и передаёт текст `connectionMessage` в экран `end`.
2. В центре экрана отображается нейтральный текст (`«Звонок завершён»`, `«Связь потеряна»`) и кнопка «Главный экран»; все подробные статусы и ошибки уже были показаны через `toast`, а `end` остаётся чистым и минимальным.
3. При нажатии на кнопку выполняется callback `onReturn`, который переводит систему в состояние `home`: имя пользователя сохраняется, команда `share-link` сбрасывает ссылку, а пользователь может снова нажать «Позвонить».
4. Если экран открывается из-за сбоя сети или медиа, соответствующее сообщение сопровождается `toast` из `notifications.md`, чтобы пояснить причину.

## Связи

- `screens.md` — путь `call → end → home`.
- `notifications.md` — сообщения об ошибках соединения и медиатеках.
