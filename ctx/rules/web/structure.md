# Файловая структура фронтенда

## Назначение

Документ определяет состав и назначение файлов фронтенд-части **Приложение**, реализованной как статическое PWA-приложение.  
Цель — зафиксировать минимальный каркас каталогов и файлов, достаточный для генерации и развёртывания клиентской части.

> **Согласованность с продуктом:** `ctx/product/overview.md` и `ctx/product/capabilities/connection.md` требуют единого окна и состояний `ready`, `waiting`, `active`, поэтому структура `web/` должна поддерживать канонические контуры (Core, Ui, Media, Net, Rtc) без дополнительных экранов; текущие файлы `ui/screen/*` всё ещё соответствуют `home → invite → call → end`, а будущая реструктуризация описана в плане `ctx/agent/plan/2025/11/20251129-rules-implementation-fixes.md`.

Каждый подкаталог (`core`, `ui`, `media`, `net`, `rtc`, `env`, `shared`) представляет собой отдельный **контур**, описывающий часть поведения браузерного приложения. Эти контуры объединяются в систему, определённую в `app.md`.

## Границы и интерфейсы

Документ не описывает внутренние классы или DI-структуру, он фиксирует только файловое окружение и соответствие каталогов архитектурным контурам, выявленным в `app.md`.

---

## 1. Общая структура каталога `web/`

```text
web/
├── app/                  # Логика приложения (Core, Ui, Media, Net, Rtc, Pwa, Env...)
│
├── assets/               # Глобальные статические ресурсы
│   └── icons/            # Иконки (копируются из lucide-static)
│
├── ui/                   # UI-уровень: веб-компоненты и экраны
│   ├── component/        # Web Components (screen-card, big-button, header, note...)
│   ├── screen/           # Сценарные экраны (home, invite, call, end, settings)
│   └── ui.css            # Глобальные CSS-правила UI
│
├── AGENTS.md             # Карта уровня web/
├── app.js                # Инициализация фронтенда, запуск DI и контуров
├── index.html            # Точка входа
├── manifest.json         # PWA-манифест
├── service-worker.js     # Сервис-воркер: кеширование и обновления
└── version.json          # Версия фронтенда
```

---

## 2. Принципы организации

- Каталог `web/` полностью автономен и не содержит серверного кода.
- Все пути относительные; приложение работает при раздаче напрямую с Apache или другого статического сервера.
- Логика загрузки и оркестрации приложения начинается с `app.js`, который запускает систему контуров, описанную в `app.md`.
- Структура экранов (`ui/screen`) следует описанию из `./ui/screens.md`.
- `service-worker.js` самостоятельно определяет набор ресурсов для кэширования
  (core-assets), используя собственный список файлов и правила PWA.
- Любые новые подкаталоги должны быть отражены в этом документе и следовать тем же правилам именования.

---

## 3. Связи

- `./app.md` — обзорное поведение браузерного приложения Приложение.
- `../arch/front.md` — архитектура фронтенд-части.
- `./ui/screens.md` — модель экранов и состояний интерфейса.
- `./pwa.md` — поведение PWA и обновление версии.
- `./rtc.md` — реализация WebRTC и сигналинг.
- `./style.md` — принципы визуального оформления.

---

## Итог

Документ задаёт базовый каркас клиентской структуры Приложение и отражает, как каталоги и файлы поддерживают контуры, описанные в `app.md`.  
Он обеспечивает единообразие при генерации и развёртывании статического PWA, согласуя расположение всех модулей и файлов.  
См. также `app.md` — обзорный документ браузерного приложения Приложение.
