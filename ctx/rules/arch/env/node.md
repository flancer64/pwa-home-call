# Компонент: Node.js Backend

## Назначение

Серверный узел HomeCall обслуживает `/api/*`, управляет раздачей PWA и хранит состояние в локальных JSON-файлах.  
Документ определяет целевую структуру и минимальный набор зависимостей для генерации рабочего Node.js-приложения.

## Среда

- Node.js ≥ 20 LTS, ESM-режим.
- Конфигурация через `.env` (порт, пути, режим).
- Запуск `npm start`, одиночный процесс `127.0.0.1:$PORT`.

## Зависимости

- `@flancer32/teq-web` — HTTP-сервер и DI-контейнер.
- `dotenv` — загрузка конфигурации из окружения.
- `nodemon` (dev) — перезапуск при изменениях.

## Структура

```text
bin/server.js      # точка входа
src/               # модули логики и DI
data/              # JSON-хранилище
web/               # фронтенд-статика
```

## Правила генерации

1. `package.json`:

   - `"type": "module"`, `"main": "bin/server.js"`, лицензия Apache-2.0;
   - скрипты: `"start": "node bin/server.js"`, `"dev": "nodemon bin/server.js"`.

2. `bin/server.js`:

   - загрузить `.env`;
   - инициализировать `@flancer32/teq-web`;
   - слушать `process.env.PORT` (по умолчанию 3000);
   - логировать старт.

3. Весь код и логи — только на английском.
4. Никаких внешних БД, только файловое хранилище.
5. Внешний доступ осуществляется через Apache-прокси (`/api/*`).

## Связанные документы

- `../teqfw.md` — проектные правила интеграции с TeqFW.

## Результат

Codex должен сформировать `package.json`, `bin/server.js` и каркас `src/`, строго следуя этим правилам.
