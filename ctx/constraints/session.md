# **Инварианты сеанса**

**Path:** `ctx/constraints/session.md`

## Краткое резюме инвариантов

Сеанс — это взаимодействие двух участников, возникающее в рамках одного `sessionId`.
Сеанс существует только внутри контекста, который создаётся при обращении по ссылке, и прекращается, когда оба участника покидают область этого идентификатора.
Сеанс не переносится на завершённые контексты, не восстанавливается ссылкой и не создаёт новых пространств.
Повторное использование идентификатора возможно только после полной очистки предыдущего контекста.

Эти инварианты удерживают модель взаимодействия минимальной: один идентификатор, один контекст, два участника, ограниченное время жизни.

---

## Термины уровня

**Контекст** — область состояния, возникающая у узла при первом обращении по ссылке и существующая только в рамках одного `sessionId` (`ctx/product/overview.md`).

**Сеанс** — взаимодействие двух участников внутри уже созданного контекста.
Сеанс не может существовать без контекста и не может выходить за пределы одного `sessionId` (`ctx/product/terms.md`).

---

## Инварианты сеанса

- Сеанс — это взаимодействие, ограниченное одним `sessionId`, который связан с одной ссылкой и одним контекстом. Сеанс не создаёт дополнительных контекстов и не разделяет идентификатор между различными пространствами (`ctx/product/terms.md`).
- Сеанс существует только в пределах контекста, созданного обращением по ссылке; он не может возникнуть без обращения и не может быть инициирован самой ссылкой (`ctx/product/overview.md`).
- Сеанс обслуживает ровно двух участников данного `sessionId`; любые дополнительные обращающиеся стороны выходят за пределы смысловой модели продукта (`ctx/product/capabilities/session.md`).
- Все сигнальные и медиасобытия принадлежат только этому идентификатору и не могут переноситься, делиться или восстанавливаться в других контекстах (`ctx/product/capabilities/link-sharing.md`).
- `sessionId` действует только во время активного сеанса, прекращает своё значение вместе с ним и может быть повторно объявлен только после полной очистки прежнего контекста (`ctx/product/overview.md`, `ctx/product/terms.md`).

---

## Хранение состояния

- `sessionId`, ссылка и связанный с ними состоянческий набор существуют только в оперативном контуре узла; постоянные хранилища не содержат ни идентификатора, ни состояния сеанса, поддерживая ограниченный технический след (`ctx/constraints/storage.md`).

---

## Итоговая декларация

Сеанс — это ограниченное взаимодействие двух участников внутри одного контекста, созданного обращением по ссылке.
Он не переносится, не расширяется и не восстанавливается вне своего `sessionId`, а его существование целиком определяется жизненным циклом соответствующего контекста.

---
