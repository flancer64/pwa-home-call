# **Инварианты ссылки**

**Path:** `ctx/constraints/link.md`

## Краткое резюме инвариантов

Ссылка объявляет один `sessionId` и служит декларацией намерения открыть доступ к возможному сеансу.
Сама по себе ссылка **не создаёт сеанс и не порождает контекст на сервере** — эти состояния возникают только после обращения по ссылке.
Контекст, созданный обращением, связан строго с одним `sessionId` и действует только до завершения соответствующего сеанса.
Повторное использование идентификатора допустимо только после полной очистки предыдущего контекста.

Эти инварианты гарантируют, что ссылка остаётся чистым текстовым указателем, не превращаясь в сущность сервера, механизм создания комнат или инструмент для восстановления завершённых состояний.

---

## Термины уровня

**Сеанс** — логическая единица взаимодействия двух участников, связанная одним `sessionId` и существующая только при их присутствии (`ctx/product/terms.md`).
**Контекст** — область состояния, возникающая при первом обращении по ссылке и действующая в рамках данного `sessionId` (`ctx/product/overview.md`).
**Ссылка** — декларация `sessionId`, которая _может_ привести к созданию контекста, но сама по себе этого не делает.

Соотношение:
_Ссылка объявляет намерение → обращение создаёт контекст → два участника формируют сеанс._

---

## Инварианты ссылки

- Ссылка объявляет `sessionId`, который сам по себе не создаёт ни сеанса, ни контекста; оба состояния появляются только при обращении участников по этой ссылке (`ctx/product/overview.md`, `ctx/product/terms.md`).
- Контекст, созданный обращением по ссылке, существует только в пределах объявленного `sessionId` и не распространяется на другие контексты (`ctx/product/overview.md`).
- Ссылка прекращает действие вместе с завершением сеанса: она не подтверждает, не продлевает и не восстанавливает завершённые состояния (`ctx/product/overview.md`).
- Повторное объявление того же `sessionId` допустимо только после полной очистки предыдущего контекста, предотвращая смешение состояний (`ctx/product/terms.md`).
- Ссылка связывает ровно двух участников данного `sessionId` и не вводит дополнительных ролей, комнат или сущностей; любое количество сторон более двух выходит за пределы смысловой модели продукта (`ctx/product/capabilities/session.md`).

---

## Итоговая декларация

Ссылка — это декларация одного `sessionId`, не создающая самостоятельных сущностей и не инициирующая сеанс без обращения участников.
Она фиксирует границы будущего контекста, ограничивает взаимодействие двумя участниками и прекращает своё значение вместе с завершением сеанса.

---
