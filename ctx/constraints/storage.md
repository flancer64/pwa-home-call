# **Ограничения на хранение данных**

**Path:** `ctx/constraints/storage.md`

## Краткое резюме инвариантов

Постоянные хранилища браузера используются только для технических метаданных и никогда не содержат `sessionId`, ссылки или состояний сеанса.
Все критичные параметры взаимодействия существуют только в оперативных контурах узла, чтобы контексты не переносились между сеансами и не восстанавливались автоматически.
Метаданные обладают идемпотентной семантикой: их обновление не создаёт новых контекстов и не влияет на смысловую модель.

Эти инварианты обеспечивают ограниченный технический след узла, отсутствие персональных данных и полную изоляцию сеансов независимо от окружения.

---

## Термины уровня

**Постоянное хранилище** — механизмы вроде `localStorage`, `IndexedDB` или аналоги, содержащие долговременные данные браузера.
**Контекст сеанса** — область состояния, возникающая при обращении по ссылке и существующая только в рамках активного `sessionId` (`ctx/product/overview.md`).

---

## Инварианты хранения

- Постоянные хранилища используются исключительно для технических метаданных и никогда не содержат `sessionId`, ссылки или состоянческих параметров сеанса. Работа узла не зависит от наличия таких записей (`ctx/product/overview.md`).
- Метаданные обладают идемпотентной семантикой: их запись и обновление не создают новых контекстов, не расширяют модель и не влияют на жизненный цикл сеанса (`ctx/product/overview.md`).
- Контекст сеанса существует только в оперативной памяти: его данные не переносятся между перезапусками и не восстанавливаются из постоянных хранилищ, исключая возобновление завершённых состояний (`ctx/constraints/session.md`).
- Отсутствие персональных данных в хранилище — инвариант продуктовой модели: узел связи не формирует профилей и не сохраняет идентифицирующие сведения вне текущего контекста (`ctx/product/overview.md`, `ctx/product/terms.md`).

---

## Итоговая декларация

Постоянное хранилище содержит только метаданные и не вовлекается в формирование или восстановление контекстов.
Контекст и параметры сеанса существуют только в оперативной среде, что обеспечивает изоляцию, идемпотентность и отсутствие персональных данных при любой корректной реализации.

---
