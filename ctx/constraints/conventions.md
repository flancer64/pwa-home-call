# **Общие инварианты реализации**

**Path:** `ctx/constraints/conventions.md`

## Краткое резюме инвариантов

Этот документ фиксирует три устойчивых инженерных ограничения:

1. **Единственный идентификатор — `sessionId`.**
   Он задаёт границы контекста, исключает появление скрытых сущностей и делает модель минимальной и предсказуемой.

2. **Логирование содержит только технические метки.**
   Это сохраняет ограниченный технический след узла, предотвращает появление новых смысловых объектов и обеспечивает переносимость состояния.

3. **Каждый активный `sessionId` связывает ровно двух участников.**
   Это закрепляет предметную модель сеанса и запрещает расширение её в сторону многопользовательских или многоуровневых взаимодействий.

Эти инварианты нужны, чтобы любые реализации узла связи сохраняли строгое соответствие продуктовой модели и не порождали дополнительных ролей, контекстов или данных.

---

## Персональные идентификаторы и контексты

- Только технический `sessionId` налагает границы контекста сеанса, и он единственный носитель идентификационной информации в модели (`ctx/product/overview.md`, `ctx/product/terms.md`).
- Документация и конфигурации упоминают исключительно уже утверждённые `sessionId`, сохраняя согласованность пространства идентификаторов (`ctx/product/terms.md`).

---

## Логирование и метаданные

- Все каналы телеметрии и локального журналирования фиксируют только технические метки (`sessionId`, `role`, `status`) и строго исключают ПДн, отражая абстракцию автономного узла (`ctx/product/overview.md`).
- Локальные записи организованы так, чтобы их можно было переносить между экземплярами без изменения смысловой модели; метаданные не создают новых сущностей и не содержат поведения.

---

## Участники и специализация слоя

- Каждая `sessionId` связывается ровно с двумя участниками, а любые модели с иными количествами сторон выходят за рамки продукта (`ctx/product/capabilities/session.md`).
- Constraints-уровень фиксирует только инженерные инварианты и не расширяет предметную модель UI, layout’ов или экранных сценариев (`ctx/product/overview.md`).

---

## Итоговая декларация

Эти инварианты обеспечивают техническую целостность модели: реализация сохраняет минимальность, двухучастниковость и ограниченный технический след независимо от архитектуры и выбранных механизмов исполнения.

---
