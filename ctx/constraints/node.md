# **Инварианты узла**

**Path:** `ctx/constraints/node.md`

## Краткое резюме инвариантов

Узел поддерживает множество `sessionId` параллельно, но каждое пространство существует отдельно и ограничено своим контекстом.
Контекст возникает только при обращении по ссылке и действует строго в пределах объявленного `sessionId`, не смешиваясь с другими.
Все сигнальные события и технические состояния принадлежат одному идентификатору и обслуживают только двух участников.
После завершения сеанса соответствующий контекст исчезает, а идентификатор может быть использован повторно.

Эти инварианты обеспечивают изоляцию состояний, недопущение скрытых сущностей и неизменность двухучастниковой модели независимо от архитектурных решений.

---

## Термины уровня

**Контекст** — область состояния, создаваемая первым участником при обращении по ссылке и существующая только в рамках одного `sessionId` (`ctx/product/overview.md`).
**Сеанс** — взаимодействие двух участников внутри этого контекста (`ctx/product/terms.md`).
**Узел** — совокупность клиентской и серверной части, поддерживающая множественные параллельные контексты без их пересечения.

---

## Параллелизм и изоляция

- Узел допускает множество параллельных `sessionId`, но каждый идентификатор создаёт собственный контекст, полностью изолированный от остальных (`ctx/product/overview.md`).
- Контексты не пересекаются и не делят состояния: сигналы, статусы и технические метки принадлежат только своему `sessionId` и не могут распространяться на другие (`ctx/product/overview.md`).
- Ограничение «двое участников на идентификатор» действует для каждого параллельного контекста независимо (`ctx/product/capabilities/session.md`).
- После завершения сеанса контекст исчезает, а `sessionId` может быть повторно объявлен без переноса состояний (`ctx/product/terms.md`).

---

## Ограничения сигнала

- Все сообщения сигнального уровня обрабатываются строго в пределах объявленного `sessionId` и не подтверждают, не продолжают и не восстанавливают завершённые или несогласованные контексты (`ctx/product/overview.md`).
- Сигнальный обмен относится только к двум участникам данного `sessionId`; любые дополнительные стороны выходят за пределы модели продукта (`ctx/product/capabilities/session.md`).
- Сигнальные каналы не порождают сущностей, ролей или комнат: узел транслирует только состояние контекста, созданного обращением по ссылке.

---

## Итоговая декларация

Узел поддерживает множество независимых контекстов, каждый из которых связан одним `sessionId`, ограничен двумя участниками и существует только в период активного сеанса.
Никакие архитектурные решения не могут расширить эту модель: контексты изолированы, состояния не смешиваются, завершённые пространства не восстанавливаются.

---
