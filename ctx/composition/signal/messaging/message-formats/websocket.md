# Форматы сообщений сигналинга WebSocket

Путь: `ctx/composition/signal/messaging/message-formats/websocket.md`

## Назначание

Содержит строго фактические строки JSON, которыми обмениваются клиенты через `wss://<host>/signal` в рамках одного `sessionId`.

## Форматы

| Тип            | Поля                                    | Описание                           |
| -------------- | --------------------------------------- | ---------------------------------- |
| `"offer"`     | `sessionId`, `sdp`                      | Предложение SDP, отправляемое гостем (`recipient`).             |
| `"answer"`    | `sessionId`, `sdp`                      | Ответ, отправляемый тем, кто принимает вызов (`initiator`).     |
| `"candidate"` | `sessionId`, `candidate`                 | ICE-кандидаты, применяемые для установки media-канала.         |
| `"hangup"`    | `sessionId`, `initiator`                | Нотификация о завершении сеанса с указанием инициатора.       |
| `"error"`     | `sessionId`, `message`, `code?`         | Сообщение об ошибке сигналинга, отображаемое в `call`-макете. |

Каждое сообщение обязательно содержит `sessionId`, что позволяет клиенту связать его с текущим UI-фрагментом (`ctx/composition/client/ui-states/states.md`).

## Контекст

- Сообщения передаются внутри одного окна (`ready → waiting → active → ended`) и не приводят к новой навигации.
- Сервер только ретранслирует JSON внутри `sessionId`, без дополнительных комнат или списков.
