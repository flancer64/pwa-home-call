# ctx/agent/report/AGENTS.md — протокол фиксации итераций

## Назначение каталога

`ctx/agent/report/` хранит отчёты по всем рабочим итерациям. Каждый файл подтверждает, что результаты синхронизации контекста и кода проверены и зафиксированы.

## Обязательные правила

- Каждая итерация завершается созданием нового отчёта с путём `ctx/agent/report/YYYY/MM/DD/HH-MM-{title}.md`.
- Файл содержит минимум три блока: «Резюме изменений», «Детали работ» и «Результаты».
- Отчёт должен отражать связь между требованиями человека, изменениями в контексте и правками в продукте.
- Отсутствие отчёта означает, что итерация не завершена и не может быть представлена человеку.

## Строгая политика неизменяемости отчётов

- **Отчёт является неизменяемым документом.**
- **Запрещено изменять отчёт после его создания при любых обстоятельствах.**
- Разрешено **только удаление** отчёта, если он признан ошибочным или нерелевантным.
- Повторная генерация отчёта выполняется только путём создания **нового файла**, а не модификацией существующего.
- При создании отчёта рекомендуется устанавливать файловые атрибуты `read-only`, чтобы исключить случайное изменение.

## Алгоритм действий агента

1. После выполнения всех изменений сформировать содержание отчёта.
2. Создать директорию по текущей дате, если она отсутствует.
3. Сохранить файл в формате Markdown с уникальным суффиксом `{title}`.
4. Убедиться, что отчёт добавлен в коммит вместе с другими изменениями.
5. Убедиться, что созданный файл помечен как `read-only`.

## Дополнительные указания

- Название `{title}` должно кратко описывать суть итерации (например, `deps-update`, `bugfix-session`).
- При повторном запуске итерации создавать новый файл, не перезаписывая предыдущий отчёт.
- Если итерация включает правки в контексте, ссылка на соответствующие документы обязательна.
