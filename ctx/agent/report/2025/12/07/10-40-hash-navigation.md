# Отчёт по первичной навигации из hash
Path: `./ctx/agent/report/2025/12/07/10-40-hash-navigation.md`

## Цель
Обеспечить, чтобы прямой ввод hash в адресную строку запускал навигацию только один раз и передавал на контроллер актуальные обработчики из Flow.

## Действия
- Расширил `show*Screen` и `render*` функции Flow, добавив возможность передавать параметры, чтобы навигация инициировалась с нужными обработчиками.
- Добавил `handleInitialHashNavigation`, которое один раз после загрузки читает `router.resolve(window.location.hash)` и вызывает соответствующую `render*` функцию вместо `renderReady`, если hash указывает на конкретный экран (`invite`, `call`, `end`).
- Добавил `windowRef`, `initialHashHandled` и вызов новой функции в `bootstrap`, так что прямой hash запускает только один переход с подготовленными обработчиками и не ломает состояние.

## Артефакты
- `web/app/Ui/Flow.mjs`
