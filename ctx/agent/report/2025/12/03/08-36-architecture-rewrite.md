# Архитектура узла связи

## Резюме изменений
- Перестроен каталог `ctx/architecture/` в новую структуру (root AGENTS, overview, system-model, data-model, lifecycle, подкаталоги client/server/messaging) и обновлены инструкции уровней.
- Архитектурные документы переписаны как декларативные описания форм: контуры клиента и сервера, сигнальные события, состояния и архитектурные границы.
- Весь каталог `ctx/architecture/web/` перемещён в `ctx/design/web/architecture/`, убрав design-детали из архитектурного пространства.

## Детали работ
- Заменены корневой и подпапочные `AGENTS.md` с картами уровней, границами и обязательным соблюдением 8 критериев качества ADSM; добавлены инструкции по ссылкам и декларативности.
- Создано ядро архитектуры (`overview.md`, `system-model.md`, `data-model.md`, `lifecycle.md`) и новые документы `client/model.md`, `client/boundaries.md`, `server/model.md`, `server/boundaries.md`, `messaging/protocol-shape.md`, каждый из которых ссылается только на `ctx/product`/`ctx/constraints` и описывает форму, а не реализацию.
- Перемещён каталог `ctx/architecture/web/` в `ctx/design/web/architecture/` (AGENTS, contours/{core,env,media,net,rtc,shared}, infra/ws.md), выполнив требование о переносе design-материала.
- Архитектурный слой очищен от DI-контрактов, WebSocket/WebRTC/JSON-структур и callback-описаний; вместо этого описаны взаимодействия и события на уровне контуров и данных.

## Результаты
- Архитектурный уровень теперь отражает форму узла связи, без повторения product/constraints и без внедрения детализации design/implementation.
- Явные границы контуров клиента и сервера, сигнальный протокол с архитектурными событиями и жизненный цикл соответствуют требованиям задачи и поддерживают согласованность с `ctx/product/overview.md`.
- Перенос документации веб-клиента в `ctx/design/web/architecture/` гарантирует, что архитектура больше не содержит реализационных подробностей, и готова к дальнейшему утверждению человеком.
