# 07-20-domozvon-web

**Цель итерации**
Привести всю документацию уровня `ctx/rules/web/**` к новой концепции: единственный путь `home → call → end`, только DI-взаимодействия без EventBus, отсутствие многопользовательских списков и статусов в UI, а также согласование PWA/share-link/storage с продуктовым описанием.

**Действия**
- переписал `ctx/rules/web/app.md` и все `contours` (core, env, media, net, rtc, shared, ui), чтобы описать прямые методные связи, коллбэки, toast-статусы и исключить шину EventBus/многопользовательскую логику;
- обновил инфраструктурные декларации (`infra/pwa.md`, `infra/ws.md`, `infra/storage.md`), чтобы описать автоматическое обновление, системную очистку кэша, протокол только для одной комнаты и локальное хранение только имени;
- привёл UI-документацию (`ui/AGENTS.md`, `layout.md`, `home.md`, `share-link.md`, `screens.md`, `screens/call.md`, `screens/end.md`, `notifications.md`) к минимальному потоку, описал `toast`-статусы, удалил подсказки/статусы в интерфейсе и зафиксировал, что `share-link` содержит только `room`, а `name` — из хранилища;
- синхронизировал `style.md` и `structure.md` с новой структурой экранов и отсутствием разрешений/toolbar, чтобы весь каталог `ctx/rules/web` говорил об одной перспективной модели.

**Результаты**
- Web-уровень документации теперь описывает один непрерывный путь `home → call → end`, все взаимодействия идут через переданные интерфейсы и `toast`, никакой EventBus или списков пользователей не упоминается;
- Share-link/PWA/storage описаны в соответствии с продуктом: ссылка содержит только `room`, имя хранится локально, кэш обновляется автоматически, а ручная очистка — через настройки браузера;
- UI/contours/infra документы ссылаются на одно и то же поведение, что делает контекст декларативным, полным и непротиворечивым.

**Соответствие критериям ADSM**
1. **Декларативность** — описываются сценарии (`home`, `call`, `end`, `share-link`, `toast`) и правила взаимодействия без перелива в реализацию;
2. **Полнота** — покрыты все Web-документы, включая `app`, контуры, PWA, UI и инфраструктуру, без пропусков;
3. **Непротиворечивость** — исключены старые EventBus-фрагменты, списки пользователей и статусы, каждая ссылка согласована с `ctx/product`;
4. **Связность** — `contours`, `ui` и `infra` ссылаются друг на друга и на продуктовые сценарии для однокнопочного вызова;
5. **Плотность** — тексты короткие, без цепляющегося словесного мусора, только ключевые шаги пользователя и архитектурные условия;
6. **Компактность** — структура документации соответствует новой модели `home → call → end` без дополнительных экранов/панелей;
7. **Неизбыточность** — убраны EventBus, `join/leave/online`, встроенные статусы, кнопка очистки, toolbar и лишние параметры в storage.
