# 2025-11-15 13:39 Closure-based privacy

- **Цель:** устранить избыточное использование `WeakMap` в синглтон-модулях веб-слоя и перевести их на приватность через замыкания внутри конструкторов.
- **Действия:** пересмотрел все модули `web/app`, удалил глобальные `WeakMap`, перенёс контекст и слушатели в замыкания конструктора для `State/Media`, `Ui/Flow`, `Net/Signal/Orchestrator` и `Ui/Screen/Call`.
- **Результаты:** приватные данные теперь удерживаются в областях видимости конструктора, публичный API не изменён, `ui Screen Call` больше не зависит от слабых коллекций; никаких модулей в `web/app` не осталось с `WeakMap`.
- **Тесты:** `npm run test:web` — выполнен без ошибок.
