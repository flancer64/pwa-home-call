# Обновление логгера и настроек

## Цель
- Выровнять логгер и экран настроек с требованиями `ctx/rules/arch/logging.md`, `ctx/rules/web/logging.md` и `ctx/rules/web/ui/screens/settings.md`.

## Действия
- Добавил сервис `HomeCall_Web_Config_RemoteLogging$`, который хранит флаг `remoteLoggingEnabled` и синхронизируется с `localStorage`, а `HomeCall_Web_Logger` теперь генерирует 4-значный ID, использует внешний флаг и дублирует сообщения на `https://console.wiredgeese.com/` через `navigator.sendBeacon()` или `fetch()`.
- Обновил `HomeCall_Web_Ui_Screen_Settings` и шаблон `web/ui/settings.html`, добавив кнопку-переключатель «Удалённое логирование», которая меняет конфигурацию, показывает текущее состояние и соседствует с кнопкой «Переустановить приложение», а также адаптировал CSS карточки под две крупные кнопки.
- Привёл `test/web/app/Ui/Settings.test.mjs` к новой структуре, добавил фиктивный конфиг и проверку переключения, и зафиксировал новую версию PWA в `web/version.json` → `20251116-143837`.

## Результаты
- Общий логгер теперь одинаково работает во фронтенде и Node, включает идентификатор источника и может дублировать сообщения на консоль `wiredgeese` только по флагу из конфигурации.
- Экран «Настройки» содержит обе кнопки и позволяет пользователю включать/выключать удалённое логирование, при этом кнопка отображает текущее состояние через `aria-pressed`.
- Версия PWA обновлена до `20251116-143837`.
- `npm run test:unit` падает в `test/unit/Back/Service/Signal/Server.test.mjs`, так как среда не разрешает WebSocket-серверу слушать порт (`listen EPERM: operation not permitted`).
