# 19:07 — укрепил WebRTC-передачу в домашней сети

## Цель итерации
- добиться стабильно работающего обмена удалённым видео в STUN-only домашней сети без TURN
- гарантировать, что локальные треки оказываются в RTCPeerConnection до принятия предложения и что кандидаты не теряются
- синхронизировать локальный поток и соединение так, чтобы ответ всегда содержал sendrecv media sections

## Действия
- пересмотрел `HomeCall_Web_Rtc_Peer`, добавил очередь удалённых ICE-кандидатов, которые применяются только после `setRemoteDescription`, сбрасываю состояние при закрытии/переподключении и обновляю `remoteStream` при первом `track`
- обеспечил, чтобы `HomeCall_Web_Ui_Flow` держал обещание на подготовку медиа и ждал его перед обработкой предложений, включая логирование `prepareLocalMedia`
- убедился, что локальный поток синхронизируется вовремя и отправляется `Peer` до начала offer/answer

## Результаты
- `web/app/Rtc/Peer.mjs`, `web/app/Ui/Flow.mjs`
- Тесты: `npm run test:unit` *(падает в `test/unit/Back/Service/Signal/Server.test.mjs`, во время запуска сервер сигналинга не может слушать 127.0.0.1: `listen EPERM: operation not permitted 127.0.0.1` в текущем окружении)*
