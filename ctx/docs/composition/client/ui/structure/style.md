# Архитектура слоя стилей клиентского UI

Path: `ctx/docs/composition/client/ui/structure/style.md`

## Назначение

Документ описывает, как именно собираются и распространяются каскадные стили, поддерживающие визуальный контур клиентского UI, и закрепляет инварианты, которые нельзя нарушать при развитии шаблонов, компонентов и экранов.

## Модель

- `web/ui/style.css` — единственная точка подключения стилей в HTML. Файл служит сборщиком (`@import`) foundation-файлов, компонентных CSS и экранных CSS, чтобы браузер видел один `<link>` и имел предсказуемое дерево импорта.
- `web/ui/style/` — каталог фундаментальных деклараций:
  - `reset.css` обеспечивает нормализацию (`box-sizing`, `margin`, механизмы фрейма) и ничего больше.
  - `tokens.css` содержит набор CSS-переменных темы, цветов, теней, радиусов и градиентов, к которым обращаются остальные слои.
  - `layout.css` описывает общую структуру страницы (`body`, `screen-shell`, `app-shell`, `state-*`), доступную любому экрану без копипасты.
  - `toast.css` фиксирует оформление уведомлений и их контейнера поверх основного UI.
- `web/ui/component/*.css` остаются рядом с соответствующими `.js`-модулями и ограничиваются атомами интерфейса; они не описывают обвязки экранов.
- `web/ui/screen/*.css` — отдельные файлы для каждого экрана (`home`, `call`, `settings`, `not-found`), содержащие только то, что потребуется конкретному шаблону (расположения, внутренние сетки, визуальный акцент).

## Правила и инварианты

1. Фундамент (`style/` и `tokens`) не сосуществует рядом с компонентами или экранами: он живёт в каталоге `web/ui/style/` и импортируется через `style.css`, чтобы не смешивать уровни.
2. Компоненты не определяют layout-обвязки экранов; они экспортируют атомы (карточки, кнопки, заголовки, заметки) и ничего не знают о конкретных состояниях `screen-shell`.
3. Экраны не дублируют стили компонентов: каждый screen-файл использует атомы и добавляет лишь экранные концепции (`home-main`, `call-stage`, `settings-actions`), а базовая структура идёт из `layout.css`.
4. Фундамент остаётся неизменяемым и общим: изменения его файлов происходят только при global-инвариантах темы; все экраны и компоненты зависят от них.
5. `style.css` — единственный подключаемый CSS-файл; он импортирует всё через относительные `@import` так, чтобы браузер и сервис-воркер работали с единственным URL, а внутренние файлы могли кэшироваться независимо.
