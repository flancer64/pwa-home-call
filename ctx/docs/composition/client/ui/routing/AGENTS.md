# Подсистема маршрутизации UI

Path: `./ctx/docs/composition/client/ui/routing/AGENTS.md`

## Назначение

Каталог `routing/` формулирует архитектурные инварианты навигационного уровня: какую конфигурацию принимает Router, как он обрабатывает hash-часть URL и какие интерфейсы остаются стабильными при расширении экранов.

## Карта уровня

- `AGENTS.md` — текущие инструкции по работе агентов внутри routing/.
- `overview.md` — обзорный взгляд на подсистему как DI-конфигурируемый навигационный слой и её ограничения.
- `router.md` — подробная механика Router, формат конфигурации и интерфейс, который не знает конкретных экранов.
- `routes.md` — руководство по объявлению маршрутов и их зависимостей в конфигурации.

## Правила работы агента

1. Router — механика навигации, за пределами неё остаются Flow, StateMachine и другие логические контуры.
2. Flow и состояния не манипулируют DOM; Router остается единственным слоем, реализующим переходы.
3. Router соблюдает контракт из `router.md` и не включает WebRTC/Signal/Media-логики или проектные сценарии.
4. Router никогда не хранит маршруты внутри себя: весь набор экранов и шаблонов описан только в внешней конфигурации уровня composition.
5. `routes.md` описывает контракт конфигурации (`routeConfig`, `defaultParams`, `registerRoute`, `setDefaultParams`) и то, как DI-модули могут её пополнять.
6. Обновления конкретных экранов и обработчиков происходят через конфигурационный модуль, который встраивает реальные контроллеры и обработчики (например, из Flow). Router остаётся универсальным движком.
