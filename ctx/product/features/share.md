# Feature: Share Invitation Link

**Путь**: ./product/features/share.md

## Назначение

Функция «Совместное подключение через ссылку» фиксирует возможность обмена параметрами комнаты и имени собеседника без ручного ввода, сохраняя контекст в `localStorage` и используя Web Share API или буфер обмена как канал доставки.

## Экран приглашения (`invite`)

- `invite` становится точкой пересечения между отправителем приглашения и получателем: его форма показывает актуальные `room`/`name`, агрегированные из `HomeCall_Web_Infra_Storage` и URL-параметров, и предлагает подтвердить или изменить значения прежде, чем двигаться дальше по потоку.
- Экран служит как для инициатора (он проверяет, что параметры совпадают с сохранёнными, и запускает `navigator.share()` через событие `ui:action:share-link`), так и для приглашённого (он видит предзаполненные данные из ссылки и принимает их перед подключением).
- После подтверждения `HomeCall_Web_Net_SignalClient` соединяет пользователя, а `HomeCall_Web_Core_App` переводит интерфейс в `lobby`; если данные невалидны, `invite` остаётся доступным для корректировки и повторной отправки.

## Web Share API и fallback

- При успешной поддержке `navigator.share()` запускается Web Share с `room`, `name` и описанием; в противном случае система копирует ссылку в буфер обмена и показывает `HomeCall_Web_Ui_Toast`, чтобы пользователь мог вставить ссылку вручную.
- Любое событие `ui:action:share-link` идёт в `HomeCall_Web_Core_App`, который формирует URL и запускает одно из действий (share или копирование) с соответствующей обратной связью пользователю.

## Связи

- `ctx/product/scenarios/share-and-join.md` — сценарий формирования и получения ссылки, включающий подтверждение параметров.  
- `ctx/rules/web/ui/screens/invite.md` — детализирует экран, где параметры согласуются и отправляются.  
- `ctx/rules/web/ui/toolbar.md` — описывает элемент управления «Поделиться ссылкой» и обработку `ui:action:share-link`.
