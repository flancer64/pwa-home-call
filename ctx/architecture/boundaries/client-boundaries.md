# Архитектурные границы клиентского контура

Path: `./ctx/architecture/boundaries/client-boundaries.md`

## Назначение

Фиксировать границы, через которые клиентский контур взаимодействует с другими контурами, описывая данные, события и инварианты, которые переходят через каждую границу без указания процедур или протоколов.

## Клиент ↔ Сигнальный контур

- Клиент передаёт сигнальному контуру `sessionId`, ссылку и архитектурные события (`предложение`, `ответ`, `кандидат`, `завершение`, `ошибка`).
- Сигнальный контур гарантирует симметрию и упорядоченность событий и возвращает подтверждение согласования, но не раскрывает структуру сообщений.
- Граница остаётся в рамках одного `sessionId` и не допускает ролей инициатора/приёмника или дополнительных контекстов.

## Клиент ↔ Серверный контур

- При объявлении ссылка фиксирует `sessionId` и сообщает серверному контуру о новом участнике.
- Серверный контур подтверждает существование контекста и предоставляет декларации об этапах (`ready`, `waiting`, `active`, `ended`), но не управляет UI или транспортом.
- Граница сохраняет stateless-инварианты: сервер не хранит множественных идентификаторов и очищает контекст после завершения.

## Клиент ↔ Контур прямого взаимодействия

- Прямое взаимодействие возникает после согласования и остаётся внутри одного `sessionId`.
- Граница фиксирует, что обмен происходит исключительно между двумя клиентскими контурами, не вводит новых ролей и не расширяет архитектурные состояния.
- Состояния клиента синхронизируются с прямым взаимодействием по декларациям фаз.

## Клиент ↔ Окружение

- Окружение предоставляет платформенные параметры (`TLS`, reverse-proxy, systemd), но не диктует, как клиент реализует `sessionId` или события.
- Клиент сохраняет нейтральность к DI, инфраструктуре и транспортным библиотекам; окружение лишь гарантирует устойчивость исполнения.
