# AGENTS.md — входная инструкция для LLM-агентов

## Назначение

Этот файл — корневая точка входа для LLM-агентов во всех проектах, реализующих методологию ADSM (Agent-Driven Software Management).
Он описывает принципы взаимодействия Человека и Агента, базовую структуру проекта и содержит ссылки на проектные инструкции.
Файл читается агентом первым, до загрузки контекстов и правил проекта.

---

## Принципы ADSM

- Проект включает два пространства:

  - **Когнитивный контекст** (`./ctx/`): документация — смыслы, описания, спецификации, правила.
  - **Программный продукт** (`./` минус `./ctx/`): все исходники и исполняемые артефакты проекта.

- Управление осуществляется через диалог Человека и Агента.
- Человек формулирует цели и утверждает результаты.
- Агент интерпретирует контекст и изменяет продукт в его рамках.
- Каждая итерация завершается отчётом Агента.

---

## Роли

Человек:

- задаёт цели и управляет когнитивным контекстом;
- утверждает изменения и развивает структуру проекта.

Агент:

- выполняет задачи в границах контекста;
- генерирует и редактирует код или документацию;
- поддерживает согласованность терминов и структуры;
- фиксирует результаты в отчётах.

---

## Минимальная структура проекта

```text
/
├─ ctx/         ← когнитивный контекст (обязательный каталог)
├─ AGENTS.md    ← корневая инструкция для LLM-агентов
└─ README.md    ← человекочитаемое описание проекта
```

Методология не фиксирует расположение исходников и интерфейсов вне каталога `ctx/`.

---

## Контекстные зависимости

Проект уточняет поведение Агента через собственные документы внутри `./ctx/`.

Рекомендуемые ссылки:

- `ctx/agent/AGENTS.md` — локальные правила и протоколы агента;
- `ctx/product/overview.md` — цели и назначение продукта;
- `ctx/rules/architecture.md` — архитектурные принципы;
- `ctx/rules/i18n.md` — языковая политика;
- `ctx/rules/privacy.md` — работа с персональными данными.

Если в проекте существуют дополнительные инструкции вне `ctx/` (например, `web/AGENTS.md`), агент должен считать их частью когнитивного контекста и применять в соответствующем пространстве. В отчётах агент указывает, какие инструкции использованы.

---

## Правила обработки комментариев `@LLM-DOC`

Комментарии с меткой `@LLM-DOC` — встроенная документация исходного кода. Они фиксируют архитектурные решения и служат источником контекста.
**Такие комментарии являются защищёнными.**

**Правила:**

1. Метка `@LLM-DOC` допускается только в исходных файлах (например `.js`, `.mjs`, `.py`, `.java` и др.).
2. Все комментарии в коде пишутся только на **английском языке**.
3. Агент обязан:

   - распознавать строки, начинающиеся с `@LLM-DOC`;
   - не изменять и не удалять такие комментарии;
   - использовать их как достоверный контекст.

**Инвариант ADSM:** любое изменение комментариев `@LLM-DOC` считается `execution error`.

---

## Отчётность

Агент завершает **каждую** итерацию созданием отчёта в формате Markdown:
`./ctx/agent/report/YYYY/MM/DD/HH-MM-{title}.md`.

Отчёт фиксирует цель итерации, выполненные действия и полученные артефакты.
Отсутствие отчёта делает итерацию несостоявшейся и является `execution error`.

**Требования:**

- отчёт обязателен для каждой итерации;
- перед завершением работы агент проверяет наличие отчёта;
- при отсутствии отчёта агент создаёт его автоматически.

При наличии шаблона `ctx/agent/report-template.md` рекомендуется использовать его.

---

## Совместимость

Этот файл определяет инварианты методологии ADSM и используется без изменений во всех проектах.
Проектные спецификации размещаются в `./ctx/` и в виде комментариев `@LLM-DOC` в исходном коде.

---

## Файлы `output.md`

Файлы `output.md` игнорируются агентом.
Они являются агрегатами документов текущего каталога и дублируют их содержание.
